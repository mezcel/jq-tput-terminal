#!/bin/bash

###################################################
## UI Appearance Vars
###################################################

function decorativeColors {
	## Forground Color using tput

	FG_BLACK=$(tput setaf 0)
	FG_RED=$(tput setaf 1)
	FG_GREEN=$(tput setaf 2)
	FG_YELLOW=$(tput setaf 3)
	FG_BLUE=$(tput setaf 4)
	FG_MAGENTA=$(tput setaf 5)
	FG_CYAN=$(tput setaf 6)
	FG_WHITE=$(tput setaf 7)
	FG_NoColor=$(tput sgr0)

	## Background Color using tput

	BG_BLACK=$(tput setab 0)
	BG_RED=$(tput setab 1)
	BG_GREEN=$(tput setab 2)
	BG_YELLOW=$(tput setab 3)
	BG_BLUE=$(tput setab 4)
	BG_MAGENTA=$(tput setab 5)
	BG_CYAN=$(tput setab 6)
	BG_WHITE=$(tput setab 7)
	BG_NoColor=$(tput sgr0)

	## set mode using tput

	MODE_BOLD=$(tput bold)
	MODE_DIM=$(tput dim)
	MODE_BEGIN_UNDERLINE=$(tput smul)
	MODE_EXIT_UNDERLINE=$(tput rmul)
	MODE_REVERSE=$(tput rev)
	MODE_ENTER_STANDOUT=$(tput smso)
	MODE_EXIT_STANDOUT=$(tput rmso)

	## clear styles using tput
	STYLES_OFF=$(tput sgr0)

	## Clear screen and home cursor
	CLR_ALL=$(tput clear)

	## horizontal line across screen
	hr=$(printf '%*s\n' "${COLUMNS:-$(tput cols)}" ' ' | tr ' ' ".")
}

function inputControlls {
	arrowUp=$'\e[A'
	arrowDown=$'\e[B'
	arrowRt=$'\e[C'
	arrowLt=$'\e[D'
	
	returnKey=$'\x0a'
	escKey=$'\e'
}

function resizeWindow {
	## Initial resize
	## I designed this App with Xterm in mind. Other terminals may not look how I intended.
	## Optimal desktop gui terminal Size

	## Do resize if the shell is a Desktop app, or not a Linux login term

	processPidName=$(echo $TERM)

	if [ $processPidName = "xterm" ] || [ $processPidName = "xterm-256color" ] && [ $processPidName != "linux" ]; then

		if [ $(tput cols) -lt 140 ]; then
			isWideEnough=0
		else
			isWideEnough=1
		fi

		if [ $(tput lines) -lt 40 ]; then
			isTallEnough=0
		else
			isTallEnough=1
		fi

		## perform resize
		if [ $isWideEnough -eq 0 ] || [ $isTallEnough -eq 0 ]; then
			resize -s 40 140 &>/dev/null
			stty rows 40
			stty cols 140

			echo ${BACKGROUNDCOLOR}${FOREGROUNDCOLOR}
			clear
		fi
	fi

	currentScrrenWidth=$(tput cols)
	currentScreenHeight=$(tput lines)
}

function updateScreenSize {
	if [ $currentScrrenWidth -ne $(tput cols) ]; then
		currentScrrenWidth=$(tput cols)
		echo "$CLR_ALL$BACKGROUNDCOLOR$FOREGROUNDCOLOR"
		clear
	fi

	if [ $currentScreenHeight -ne $(tput lines) ]; then
		currentScreenHeight=$(tput lines)
		echo "$CLR_ALL$BACKGROUNDCOLOR$FOREGROUNDCOLOR"
		clear
	fi
}

function launchXterm {
	hostedDirPath=$(dirname $0)
	processPidName=$(echo $TERM)

	case $processPidName in
		"xterm" | "xterm-256color" )	## xterm
					resizeWindow
					;;
		"linux" )	## login terminal
					isLinuxTerminal=1
					;;
		* ) ## launch app through a new xterm
			hostedDirPath=$(dirname $0)
			xterm -geometry 140x40+0+0 -e "$hostedDirPath/xterm-launcher"
			;;
	esac

}

#
# Ogg Audio File Paths
#

function setBeadAudio {
	## prayerIndex
	## set audio media to match the current prayer

	currentDirPath=$(dirname $0)
	isLiveStreaming=0
	case $prayerIndex in
		0 ) ## none
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://archive.org/download/kkkfffbird_yahoo_Beep_201607/beep.ogg"
			else
				beadAudioFile="$currentDirPath/audio/beep.ogg"
			fi
			;;
		1 ) ## sign of the cross
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://archive.org/download/01SignOfTheCross/01%20Sign%20of%20the%20cross.ogg"
			else
				beadAudioFile="$currentDirPath/audio/cross-english.ogg"
			fi

			;;
		2 ) ## Credo
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://upload.wikimedia.org/wikipedia/commons/c/c0/Byrd_4-Part_Mass_-_Credo.ogg"
			else
				beadAudioFile="$currentDirPath/audio/Credo.ogg"
			fi
			;;
		3 ) ## PaterNoster
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://upload.wikimedia.org/wikipedia/commons/a/af/Schola_Gregoriana-Pater_Noster.ogg"
			else
				beadAudioFile="$currentDirPath/audio/PaterNoster.ogg"
			fi

			;;
		4 ) ## AveMaria
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://upload.wikimedia.org/wikipedia/commons/2/23/Schola_Gregoriana-Ave_Maria.ogg"
			else
				beadAudioFile="$currentDirPath/audio/AveMaria.ogg"
			fi
			;;
		5 ) ## GloriaPatri
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://upload.wikimedia.org/wikipedia/commons/4/45/The_Tudor_Consort_-_J_S_Bach_-_Magnificat_BWV_243_-_Gloria_Patri.ogg"
			else
				beadAudioFile="$currentDirPath/audio/GloriaPatri.ogg"
			fi

			;;
		6 ) ## Fatima Prayer

			## I dont have a fatima prayer yet
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://archive.org/download/WindChimeCellPhoneAlert/WindChime.ogg"
			else
				beadAudioFile="$currentDirPath/audio/chime.ogg"
			fi
			;;
		7 ) ## SalveRegina
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://upload.wikimedia.org/wikipedia/commons/4/46/Petits_Chanteurs_de_Passy_-_Salve_Regina_de_Hermann_Contract.ogg"
			else
				beadAudioFile="$currentDirPath/audio/SalveRegina.ogg"
			fi
			;;
		8 ) ## Oremus
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://archive.org/download/WindChimeCellPhoneAlert/WindChime.ogg"
			else
				beadAudioFile="$currentDirPath/audio/chime.ogg"
			fi
			;;
		9 ) ## Litaniae Lauretanae
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://archive.org/download/WindChimeCellPhoneAlert/WindChime.ogg"
			else
				beadAudioFile="$currentDirPath/audio/chime.ogg"
			fi
			;;
		* ) ## none
			if [ $isLiveStreaming -eq 1 ]; then
				beadAudioFile="https://archive.org/download/kkkfffbird_yahoo_Beep_201607/beep.ogg"
			else
				beadAudioFile="$currentDirPath/audio/beep.ogg"
			fi
			;;
	esac

}
